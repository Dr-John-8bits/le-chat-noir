<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Explore - When Day Chokes The Night</title>
  <!-- Google Font Press Start 2P -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #0f0;
      font-family: 'Press Start 2P', monospace;
      font-size: clamp(0.75rem, 2vw, 1rem);
      overflow: auto;
    }
    #starfield {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: -1;
    }
    main {
      position: relative;
      padding: 2rem;
      z-index: 1;
    }
    h1 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      text-shadow: 0 0 5px #0f0;
    }
    p {
      font-size: 0.8rem;
      text-shadow: 0 0 3px #0f0;
      max-width: 800px;
      margin: auto;
    }
    /* Responsive adjustments */
    @media (max-width: 600px) {
      h1 { font-size: 1.5rem; }
      p { font-size: 0.7rem; max-width: 90%; }
    }
    @media (max-width: 400px) {
      p { font-size: 0.6rem; }
    }
    .scanlines {
      position: relative;
      width: 100%;
      max-width: 960px;
      aspect-ratio: 2 / 1; /* 400x200 logical ratio */
      margin: 6vh auto;
    }
    #battle {
      background: #000;
      display: block;
      image-rendering: pixelated;
      width: 100%;
      height: 100%;
      border: clamp(2px, .6vh, 6px) solid #0F0;
      box-sizing: border-box;
    }
    /* Game title on tourography page */
    #game-title {
      position: absolute;
      top: 4rem;
      width: 100%;
      text-align: center;
      font-size: 24px;
      font-family: 'Press Start 2P', monospace;
      white-space: nowrap;
      background: linear-gradient(90deg, red, orange, yellow, green, cyan, blue, magenta);
      background-size: 400% 400%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: rainbow 5s linear infinite;
      z-index: 2;
    }
    @keyframes rainbow {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    /* Le Chat Noir navbar styling */
    .navbar-custom{ background: rgba(6,9,20,.45); border-bottom:1px solid rgba(255,255,255,.06); backdrop-filter: blur(6px); z-index: 5; }
    .navbar-dark .navbar-brand{ font-weight:700; }
    /* Keep retro body font for the rest of the page */
    body .navbar{ font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, Liberation Sans, sans-serif; font-size: 0.95rem; }
  </style>
</head>
<body>
  <canvas id="starfield"></canvas>
  <nav class="navbar navbar-expand-md navbar-dark navbar-custom sticky-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">Le Chat Noir</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMain" aria-controls="navbarsMain" aria-expanded="false" aria-label="Basculer la navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarsMain">
        <ul class="navbar-nav ms-auto mb-2 mb-md-0">
          <li class="nav-item"><a class="nav-link" href="about.html">Ã€ propos</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <a id="game-title" href="drone.html">Mission X-FLR6:<br>Drone Offensive</a>
  <main>
    <div class="scanlines">
      <canvas id="battle" width="400" height="200"></canvas>
    </div>
  </main>
  <script>
    (function(){
      const canvas = document.getElementById('starfield');
      const ctx = canvas.getContext('2d');
      let w, h;
      let stars = [], ufos = [], aliens = [], invaderPattern;
      function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        const isMobile = w < 600;
        const starCount = isMobile ? 150 : 400;
        const ufoCount = isMobile ? 1 : 3;
        const alienCount = isMobile ? 3 : 5;
        stars = Array.from({length: starCount}, () => ({
          x: Math.random() * w,
          y: Math.random() * h,
          size: Math.random() * (isMobile ? 0.8 : 1) + 0.5,
          alpha: Math.random(),
          d: Math.random() * 0.02 + 0.005
        }));
        ufos = Array.from({length: ufoCount}, () => ({
          x: Math.random() * w,
          y: Math.random() * h * (isMobile ? 0.5 : 0.7),
          speed: Math.random() * (isMobile ? 0.01 : 0.4) + (isMobile ? 0.002 : 0.1),
          angle: Math.random() * Math.PI * 2,
          scale: Math.random() * (isMobile ? 0.3 : 0.5) + (isMobile ? 0.3 : 0.5),
          color: '#99CCFF',
          pointlist: [[-9,0],[-3,-3],[-2,-6],[2,-6],[3,-3],[9,0],[-9,0],[-3,4],[3,4],[9,0]]
        }));
        aliens = Array.from({length: alienCount}, () => ({
          x: Math.random() * w,
          y: Math.random() * h * (isMobile ? 0.2 : 0.3) + (isMobile ? h*0.3 : h*0.35),
          speed: Math.random() * (isMobile ? 0.01 : 0.02) + (isMobile ? 0.002 : 0.005),
          scale: Math.random() * (isMobile ? 0.6 : 0.8) + (isMobile ? 0.6 : 0.8),
          color: '#0f0',
          pointlist: invaderPattern
        }));
      }
      window.addEventListener('resize', resize);
      invaderPattern = [
        [0,0,1,1,1,1,1,1,0,0],
        [0,1,1,0,0,0,0,1,1,0],
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,1,1,1,1,1,1,0,1],
        [1,0,0,1,1,1,1,0,0,1],
        [0,0,1,0,0,0,0,1,0,0],
        [0,0,1,0,1,1,0,1,0,0],
        [0,1,0,1,0,0,1,0,1,0]
      ];
      resize();
      function loop() {
        ctx.clearRect(0, 0, w, h);
        stars.forEach(s => {
          s.alpha += s.d * (Math.random() < 0.5 ? 1 : -1);
          if (s.alpha <= 0) {
            s.x = Math.random() * w;
            s.y = Math.random() * h;
            s.size = Math.random() * 1 + 0.5;
            s.alpha = 0;
            s.d = Math.random() * 0.02 + 0.005;
          } else if (s.alpha >= 1) {
            s.alpha = 1;
            s.d *= -1;
          }
          ctx.globalAlpha = s.alpha;
          ctx.fillStyle = '#fff';
          ctx.fillRect(s.x, s.y, s.size, s.size);
        });
        ufos.forEach(u => {
          u.angle += (Math.random() * 0.1 - 0.05);
          u.x += Math.cos(u.angle) * u.speed;
          u.y += Math.sin(u.angle) * u.speed;
          if (u.x < -50) u.x = w + 50;
          if (u.x > w + 50) u.x = -50;
          ctx.save();
          ctx.translate(u.x, u.y);
          ctx.scale(u.scale, u.scale);
          ctx.beginPath();
          const ups = u.pointlist;
          ctx.moveTo(ups[0][0], ups[0][1]);
          for (let i = 1; i < ups.length; i++) ctx.lineTo(ups[i][0], ups[i][1]);
          ctx.closePath();
          ctx.fillStyle = u.color;
          ctx.fill();
          ctx.strokeStyle = '#fff';
          ctx.lineWidth = 1 / u.scale;
          ctx.stroke();
          ctx.restore();
        });
        aliens.forEach(a => {
          a.x += a.speed;
          const invaderWidth = invaderPattern[0].length;
          const totalWidth = invaderWidth * a.scale * 6;
          if (a.x > w + totalWidth) a.x = -totalWidth;
          const psize = Math.round(a.scale * 5);
          for (let row = 0; row < invaderPattern.length; row++) {
            for (let col = 0; col < invaderPattern[row].length; col++) {
              if (invaderPattern[row][col]) {
                ctx.fillStyle = a.color;
                ctx.fillRect(a.x + col * psize, a.y + row * psize, psize, psize);
              }
            }
          }
        });
        requestAnimationFrame(loop);
      }
      loop();
    })();
  </script>
  <script>
    // Drone battle simulation
    const canvasBattle = document.getElementById('battle');
    const ctxBattle = canvasBattle.getContext('2d');
    const explosions = [];

    const LOGICAL_W = 400, LOGICAL_H = 200; // keep game logic in these units
    function resizeBattle(){
      const rect = canvasBattle.getBoundingClientRect();
      const dpr = window.devicePixelRatio || 1;
      // Fit backing store to display size, then scale logical space to 400x200
      canvasBattle.width  = Math.round(rect.width  * dpr);
      canvasBattle.height = Math.round(rect.height * dpr);
      const scaleX = (rect.width  / LOGICAL_W) * dpr;
      const scaleY = (rect.height / LOGICAL_H) * dpr;
      ctxBattle.setTransform(scaleX, 0, 0, scaleY, 0, 0);
    }
    window.addEventListener('resize', resizeBattle);

    class Drone {
      constructor(x, y, color) {
        this.x = x; this.y = y;
        this.vx = (Math.random() - 0.5) * 2;
        this.vy = (Math.random() - 0.5) * 2;
        this.color = color;
        this.size = 4;
      }
      update() {
        this.x += this.vx; this.y += this.vy;
        if (this.x < 0 || this.x > LOGICAL_W) this.vx *= -1;
        if (this.y < 0 || this.y > LOGICAL_H) this.vy *= -1;
      }
      draw() {
        ctxBattle.fillStyle = this.color;
        const x = Math.floor(this.x - this.size/2);
        const y = Math.floor(this.y - this.size/2);
        ctxBattle.fillRect(x, y, this.size, this.size);
      }
    }

    const fleetA = Array.from({length: 20}, () => new Drone(50, 100, '#0F0'));
    const fleetB = Array.from({length: 20}, () => new Drone(350, 100, '#F00'));

    function loopBattle() {
      ctxBattle.clearRect(0, 0, LOGICAL_W, LOGICAL_H);
      [...fleetA, ...fleetB].forEach(d => { d.update(); d.draw(); });
      if (Math.random() < 0.05) {
        ctxBattle.strokeStyle = '#fff';
        ctxBattle.beginPath();
        const from = fleetA[Math.floor(Math.random() * fleetA.length)];
        const to = fleetB[Math.floor(Math.random() * fleetB.length)];
        ctxBattle.moveTo(from.x, from.y);
        ctxBattle.lineTo(to.x, to.y);
        ctxBattle.stroke();
        explosions.push({ x: to.x, y: to.y, radius: 0, alpha: 1 });
      }
      // update and draw micro-explosions
      explosions.forEach((ex, i) => {
        ex.radius += 1;
        ex.alpha -= 0.05;
        ctxBattle.save();
        ctxBattle.globalAlpha = ex.alpha;
        ctxBattle.beginPath();
        ctxBattle.arc(ex.x, ex.y, ex.radius, 0, Math.PI * 2);
        ctxBattle.fillStyle = '#ff0';
        ctxBattle.fill();
        ctxBattle.restore();
        if (ex.alpha <= 0) explosions.splice(i, 1);
      });
      requestAnimationFrame(loopBattle);
    }

    resizeBattle();
    loopBattle();
  </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>